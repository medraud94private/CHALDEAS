# Visualization Features Plan

## User Vision

> "íŠ¹ì • ì‚¬ê±´ì„ ê²€ìƒ‰í•˜ë©´ ê·¸ ì‹œëŒ€, ê·¸ ìœ„ì¹˜ë¥¼ ë³´ì—¬ì£¼ë©´ì„œ ì„¤ëª…ì´ ë‚˜ì˜´. ì—°ê´€ ì‚¬ê±´ì˜ ì¥ì†Œë‚˜ ì‹œê°„ì„ ì„ ìœ¼ë¡œ ë³´ì—¬ì£¼ê³ , ê° ì¸ë¬¼ë³„ë¡œ ì‹œëŒ€ë³„ ì´ë™ì´ë‚˜ ì–´ë–¤ ì‚¬ê±´ì— ì—®ì˜€ëŠ”ì§€ë¥¼ ì¼ëŒ€ê¸°ë¡œ ë³¼ ìˆ˜ ìˆê²Œ. ìœ„í‚¤í”¼ë””ì•„ì²˜ëŸ¼, ê·¸ê±¸ ì§€ë„ë¡œ ë³´ëŠ” ê±°ì•¼. ê·¸ ì‹œëŒ€ì˜ êµµì§í•œ ì‚¬ê±´ì€ ì—°ê´€ ì—†ì–´ë„ ìƒì‹œ í‘œì‹œ."

## Core Features

### 1. Event Search & Display (ê¸°ë³¸ êµ¬ì¡°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Event Search & Display                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  User searches: "ë§ˆë¼í†¤ ì „íˆ¬"                                        â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     3D Globe View                           â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚              Timeline: -490 BCE                             â”‚    â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”                                 â”‚    â”‚
â”‚  â”‚                    â”‚ ğŸ”´  â”‚ â† Marathon                       â”‚    â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”˜                                 â”‚    â”‚
â”‚  â”‚         Greece â”â”â”â”â”›                                        â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  Camera animates to location, zooms in                      â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   Wiki Panel (Side)                         â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  # Battle of Marathon (ë§ˆë¼í†¤ ì „íˆ¬)                          â”‚    â”‚
â”‚  â”‚  490 BCE | Marathon, Greece                                 â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  The Battle of Marathon took place in 490 BC...             â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  ğŸ“š Sources:                                                â”‚    â”‚
â”‚  â”‚  - Herodotus, Histories Book 6 (Perseus)                   â”‚    â”‚
â”‚  â”‚  - Plutarch, Life of Miltiades                             â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  ğŸ”— Related Events: [Greco-Persian Wars] [Battle of...]    â”‚    â”‚
â”‚  â”‚  ğŸ‘¤ Key Figures: [Miltiades] [Darius I] [Pheidippides]    â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Related Events Connection (ì—°ê´€ ì‚¬ê±´ ì—°ê²°ì„ )

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Related Events Visualization                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  When viewing "Battle of Marathon":                                  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚       Sardis                                                â”‚    â”‚
â”‚  â”‚         ğŸ”µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚    â”‚
â”‚  â”‚        (Ionian Revolt start)    â”‚                          â”‚    â”‚
â”‚  â”‚                                 â”‚  Causal chain            â”‚    â”‚
â”‚  â”‚                                 â”‚  (dashed line)           â”‚    â”‚
â”‚  â”‚                                 â–¼                          â”‚    â”‚
â”‚  â”‚                              Marathon                       â”‚    â”‚
â”‚  â”‚       Persepolis              ğŸ”´ â—„â”€â”€â”€â”€â”                    â”‚    â”‚
â”‚  â”‚          ğŸŸ¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚    â”‚
â”‚  â”‚        (Persian Empire HQ)         â”‚                       â”‚    â”‚
â”‚  â”‚                                    â”‚                       â”‚    â”‚
â”‚  â”‚                                    â–¼                       â”‚    â”‚
â”‚  â”‚                               Salamis                       â”‚    â”‚
â”‚  â”‚                                  ğŸ”µ                        â”‚    â”‚
â”‚  â”‚                             (Future event)                  â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  Line Types:                                                        â”‚
â”‚  â”â”â”â”  Causal relationship (direct cause/effect)                   â”‚
â”‚  â”€ â”€ â”€  Temporal sequence (same war/period)                        â”‚
â”‚  Â·Â·Â·Â·Â·Â·  Thematic connection (similar type)                         â”‚
â”‚                                                                      â”‚
â”‚  Animation: Lines draw progressively, following time order          â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Person Biography View (ì¸ë¬¼ ì¼ëŒ€ê¸°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Person Biography View                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Selected: Alexander the Great (ì•Œë ‰ì‚°ë“œë¡œìŠ¤ ëŒ€ì™•)                    â”‚
â”‚  356 BCE - 323 BCE                                                  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  Life Journey on Globe                      â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚    1. Pella (Birth) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚    â”‚
â”‚  â”‚         ğŸŸ¢                            â”‚                     â”‚    â”‚
â”‚  â”‚                                       â–¼                     â”‚    â”‚
â”‚  â”‚    2. Thebes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”                 â”‚    â”‚
â”‚  â”‚         ğŸ”µ                            â”‚  â”‚                 â”‚    â”‚
â”‚  â”‚                                       â”‚  â”‚                 â”‚    â”‚
â”‚  â”‚    3. Granicus â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”              â”‚    â”‚
â”‚  â”‚         âš”ï¸                            â”‚  â”‚  â”‚              â”‚    â”‚
â”‚  â”‚                                       â”‚  â”‚  â”‚              â”‚    â”‚
â”‚  â”‚    4. Issus â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”           â”‚    â”‚
â”‚  â”‚         âš”ï¸                            â”‚  â”‚  â”‚  â”‚           â”‚    â”‚
â”‚  â”‚                                       â–¼  â–¼  â–¼  â–¼           â”‚    â”‚
â”‚  â”‚    ... â†’ Persepolis â†’ Bactria â†’ India â†’ Babylon (Death)   â”‚    â”‚
â”‚  â”‚                                              ğŸ”´            â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Timeline Strip                           â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  356 BCE         336        331        326        323 BCE   â”‚    â”‚
â”‚  â”‚    â”‚              â”‚          â”‚          â”‚          â”‚        â”‚    â”‚
â”‚  â”‚    ğŸŸ¢â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âš”ï¸â”€â”€â”€â”€â”€â”€â”€â”€â”€âš”ï¸â”€â”€â”€â”€â”€â”€â”€â”€â”€âš”ï¸â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ğŸ”´       â”‚    â”‚
â”‚  â”‚  Birth        Becomes    Gaugamela   India     Death        â”‚    â”‚
â”‚  â”‚              King                   Campaign                â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  [Click any point to view that event/location]              â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  Play Button: [â–¶ï¸ Animate Journey] - Globe flies through locations   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Era Background Events (ì‹œëŒ€ ë°°ê²½ ìƒì‹œ í‘œì‹œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Era Background Events                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Timeline set to: -490 BCE (ë§ˆë¼í†¤ ì „íˆ¬ ì‹œê¸°)                        â”‚
â”‚                                                                      â”‚
â”‚  Regardless of search focus, always show major events:              â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚     ğŸŸ¡ Rome (Republic era)                                  â”‚    â”‚
â”‚  â”‚         â”” "Roman Republic established ~509 BCE"             â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚     ğŸŸ¡ Persepolis                                           â”‚    â”‚
â”‚  â”‚         â”” "Achaemenid Empire at peak"                       â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚     ğŸŸ¡ Babylon                                              â”‚    â”‚
â”‚  â”‚         â”” "Under Persian control"                           â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚     ğŸŸ¡ Chang'an                                             â”‚    â”‚
â”‚  â”‚         â”” "Spring and Autumn Period (China)"                â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚     ğŸ”´ Marathon (FOCUSED)                                   â”‚    â”‚
â”‚  â”‚         â”” "Battle of Marathon"                              â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  Event Importance Levels:                                           â”‚
â”‚  â˜…â˜…â˜…â˜…â˜…  Always visible (world-changing events)                     â”‚
â”‚  â˜…â˜…â˜…â˜…â˜†  Visible when era Â±50 years                                 â”‚
â”‚  â˜…â˜…â˜…â˜†â˜†  Visible when era Â±20 years                                 â”‚
â”‚  â˜…â˜…â˜†â˜†â˜†  Visible when directly related                              â”‚
â”‚  â˜…â˜†â˜†â˜†â˜†  Visible only when searched                                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## UI Components

### Globe Markers

```typescript
interface MapMarker {
  id: string;
  type: 'event' | 'person_birth' | 'person_death' | 'location';
  latitude: number;
  longitude: number;

  // Visual properties
  color: string;          // Category-based
  size: number;           // Importance-based
  icon?: string;          // Optional icon
  pulsing?: boolean;      // For focused item

  // Display
  label: string;
  tooltip: string;

  // Filtering
  year: number;           // BCE as negative
  importance: 1 | 2 | 3 | 4 | 5;
  isBackground: boolean;  // Always show for era
}
```

### Connection Lines (Arcs)

```typescript
interface ConnectionArc {
  id: string;
  from: { lat: number; lng: number };
  to: { lat: number; lng: number };

  // Visual
  type: 'causal' | 'temporal' | 'thematic' | 'journey';
  color: string;
  dashArray?: string;     // For dashed lines
  animated?: boolean;     // Moving dots along arc

  // Data
  fromEventId: string;
  toEventId: string;
  label?: string;
}
```

### Wiki Panel States

```typescript
type WikiPanelContent =
  | { type: 'event'; event: Event; sources: Source[]; related: Event[] }
  | { type: 'person'; person: Person; events: Event[]; journey: Location[] }
  | { type: 'location'; location: Location; events: Event[]; persons: Person[] }
  | { type: 'search_results'; results: SearchResult[] };
```

## Interaction Flows

### 1. Event Search Flow

```
User types "ë§ˆë¼í†¤" in search
         â”‚
         â–¼
SHEBA parses query, identifies "Battle of Marathon"
         â”‚
         â–¼
Globe animates to Marathon, Greece
Timeline slides to -490 BCE
         â”‚
         â–¼
Wiki panel shows event details with sources (LAPLACE)
         â”‚
         â–¼
Related events appear as markers with connection lines
Background events for -490 BCE become visible
```

### 2. Person View Flow

```
User clicks person name "ì†Œí¬ë¼í…ŒìŠ¤"
         â”‚
         â–¼
Globe shows Athens (primary location)
Timeline shows lifespan (-470 to -399)
         â”‚
         â–¼
Wiki panel shows biography
Life events listed chronologically
         â”‚
         â–¼
[View Journey] button available
Click â†’ Globe animates through life locations
```

### 3. Era Exploration Flow

```
User drags timeline to -500 BCE
         â”‚
         â–¼
Globe updates to show major events of era
Markers fade in/out based on importance threshold
         â”‚
         â–¼
User can click any marker to focus
Connection lines appear for related events
```

## Data Requirements

### Event Relationships Table

```sql
CREATE TABLE event_relationships (
    id SERIAL PRIMARY KEY,
    event_from_id INTEGER REFERENCES events(id),
    event_to_id INTEGER REFERENCES events(id),
    relationship_type VARCHAR(50),  -- causal, temporal, thematic
    strength INTEGER DEFAULT 3,     -- 1-5
    description TEXT
);
```

### Person Events Table

```sql
CREATE TABLE person_events (
    id SERIAL PRIMARY KEY,
    person_id INTEGER REFERENCES persons(id),
    event_id INTEGER REFERENCES events(id),
    role VARCHAR(100),              -- commander, participant, victim
    location_id INTEGER REFERENCES locations(id),
    year INTEGER
);
```

### Person Locations Table (Journey)

```sql
CREATE TABLE person_locations (
    id SERIAL PRIMARY KEY,
    person_id INTEGER REFERENCES persons(id),
    location_id INTEGER REFERENCES locations(id),
    year_start INTEGER,
    year_end INTEGER,
    location_type VARCHAR(50),      -- birth, death, residence, visit
    notes TEXT
);
```

## Implementation Priority

### Phase 1: Basic Display
- [x] Globe with markers
- [x] Timeline slider
- [ ] Event search â†’ focus on location
- [ ] Wiki panel with event details

### Phase 2: Connections
- [ ] Related events markers
- [ ] Connection lines (arcs)
- [ ] Causal relationship visualization

### Phase 3: Person View
- [ ] Person biography panel
- [ ] Life journey visualization
- [ ] Animated journey playback

### Phase 4: Era Context
- [ ] Background events by era
- [ ] Importance-based visibility
- [ ] Era summary overlay

## Performance Considerations

1. **Marker Clustering**: Group nearby markers at low zoom
2. **Level of Detail**: Show fewer events when zoomed out
3. **Arc Simplification**: Reduce arc segments at distance
4. **Virtual List**: Wiki panel uses virtualized scrolling
5. **Data Pagination**: Load events in chunks by era/region
