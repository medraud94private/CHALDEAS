# User Data Contribution Vision

> **상태**: V2 구상
> **작성일**: 2026-01-07
> **관련**: `OPEN_CURATION_VISION.md`

---

## 핵심 아이디어

사용자가 보유한 역사 자료를 프로젝트와 동일한 오픈소스 라이센스 조건으로 업로드하고, 시스템이 이를 파싱하여 기존 데이터에 통합.

---

## 컨셉

```
사용자 업로드                    시스템 처리
┌─────────────────┐           ┌─────────────────┐
│ PDF, 텍스트, 이미지│    →     │ 파싱 & NER 추출  │
│ 스캔 문서        │           │ 엔티티 매칭      │
│ 개인 연구 자료   │           │ 품질 검증        │
└─────────────────┘           └─────────────────┘
                                      ↓
                              ┌─────────────────┐
                              │ 기존 데이터 통합  │
                              │ Historical Chain │
                              │ 연결 & 보강      │
                              └─────────────────┘
```

---

## 업로드 가능 자료 (예상)

| 유형 | 예시 |
|------|------|
| 문서 | PDF, TXT, DOCX, 마크다운 |
| 이미지 | 스캔 문서, 사진 자료 (OCR 처리) |
| 구조화 데이터 | CSV, JSON, XML |
| 링크 | 외부 아카이브, 논문 DOI |

---

## 라이센스 조건

- 업로드 시 프로젝트 라이센스 동의 필수
- 동일 조건 공유 (Share-Alike)
- 저작권 문제 있는 자료 업로드 금지
- 업로더 귀속 표시 유지

---

## 데이터 품질 등급 체계

업로드된 데이터와 검증된 학술 데이터를 구분:

| Tier | 설명 | 예시 |
|------|------|------|
| **Tier 1** | 검증된 학술 소스 | JSTOR, 대학 아카이브, 공식 DB |
| **Tier 2** | 큐레이터 검증 완료 | 전문가 리뷰 통과 |
| **Tier 3** | 커뮤니티 검토 중 | 일정 수 이상 긍정 평가 |
| **Tier 4** | 미검증 업로드 | 신규 업로드, 검토 대기 |

**사용자 경험**:
- 검색 시 티어 필터 제공
- 기본값: Tier 1-2만 표시
- 고급 옵션: 모든 티어 포함

```
[검색 결과]
☑ 검증된 자료만 (Tier 1-2)
☐ 커뮤니티 검토 중 포함 (Tier 3)
☐ 미검증 포함 (Tier 4)
```

---

## 기술 파이프라인 (예상)

```
1. 업로드 → 포맷 감지
2. 파싱 (PyMuPDF, OCR, 텍스트 추출)
3. NER 파이프라인 (기존 spaCy + GPT-nano)
4. 엔티티 매칭 (기존 Person/Location/Event와 연결)
5. 품질 검증 (자동 + 큐레이터 리뷰)
6. 승인 시 World State에 병합
```

---

## 충돌 해결 정책

같은 사건에 대해 다른 정보가 업로드될 경우:

| 충돌 유형 | 처리 방식 |
|----------|----------|
| 사실 충돌 (날짜, 장소 등) | 출처 신뢰도 비교, 병렬 표시 + 주석 |
| 해석 충돌 | 모든 해석 병렬 표시 (Open Curation 정책 따름) |
| 중복 업로드 | 자동 감지 → 기존 데이터에 출처 추가 |

```
예: "콜럼버스 신대륙 도착일"
├── 업로드 A: 1492년 10월 12일 (출처: 스페인 기록)
├── 업로드 B: 1492년 10월 11일 (출처: 선원 일지)
→ 두 날짜 병기 + 출처 차이 주석
```

---

## 삭제/수정 권한

| 상황 | 처리 방식 |
|------|----------|
| 업로더 수정 요청 | 새 버전 생성, 이전 버전 보존 |
| 업로더 삭제 요청 | 비공개 전환 (완전 삭제 X) |
| 개인정보 포함 | 익명화 처리, 콘텐츠는 유지 |
| 저작권 침해 | 즉시 비공개 → 검토 |

**원칙**: Immutable Core 유지, 삭제 = 비공개 전환

---

## Open Curation과의 연계

```
User Data Contribution          Open Curation
(원본 자료 기여)                 (해석/연결 기여)
        ↓                              ↓
   ┌─────────────────────────────────────┐
   │         CHALDEAS World State        │
   │      (통합된 역사 지식 그래프)        │
   └─────────────────────────────────────┘
```

---

## 참고

- 현재 NER 파이프라인: `docs/planning/NER_PIPELINE_DESIGN.md`
- Open Curation: `docs/planning/v2/OPEN_CURATION_VISION.md`
